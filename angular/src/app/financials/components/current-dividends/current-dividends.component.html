<div class="container ms-2" [abpLoading]="loading">
  <div class="card">
    <div class="card-body">
      <div class="row">
        <div class="col-md-10">
          <p-autoComplete
            [(ngModel)]="selectedItem"
            [ngModelOptions]="{ standalone: true }"
            (onSelect)="onSelect($event)"
            [suggestions]="suggestions"
            (completeMethod)="search($event)"
            [style]="{ width: '100%' }"
            field="company"
            [inputStyle]="{ width: '100%' }"
          >
          </p-autoComplete>
        </div>
        <div class="col-md-2 text-end" *ngIf="permission.edit">
          <a
            href="JavaScript:void(0)"
            (click)="insertUpdateCalculateCompQuartersNetProfitByInput()"
            class="btn btn-success btn-sm me-1"
            ><i class="fa fa-save"></i> Save</a
          >
          <!-- <a href="#" *ngIf="permission.create"  class="btn btn-primary btn-sm me-1"><i class="fa fa-edit"></i> Update</a> -->
        </div>
      </div>
      <div class="row mt-2">
        <div class="col-md-4">
          <p-dropdown
            [options]="stockMarkets"
            [(ngModel)]="stockMarketID"
            name="stockMarketID"
            placeholder="Select a Market"
            optionLabel="abbr"
            optionValue="stockMarketID"
            (ngModelChange)="getCurrentDividendsByStockMarketID()"
            [style]="{ width: '100%' }"
            [showClear]="true"
          >
          </p-dropdown>
        </div>
      </div>
      <div class="row mt-2">
        <div class="col-md-12">
          <p-table
            #dt
            [value]="currentDividends"
                [scrollable]="true"
                scrollHeight="25rem"
                responsiveLayout="stack"
                styleClass="p-datatable-gridlines"
          >
            <ng-template pTemplate="caption">
              <div class="d-flex flex-column flex-md-row justify-content-between">
                <div class="mr-auto p-2">
                  <span> </span>
                </div>
              </div>
            </ng-template>
            <ng-template pTemplate="header">
              <tr>
                <th>Ticker</th>
                <th>Current Dividend</th>
                <th>Remarks</th>
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-item>
              <tr>
                <td>{{ item.ticker }}</td>
                <td>
                  <input
                  autofocus
                  type="number"
                  [(ngModel)]="item.currentDividend"
                  [ngModelOptions]="{ standalone: true }"
                  name="currentDividend"
                  class="form-control"
                  placeholder="Current Dividend"
                />
                </td>
                <td>
                  <textarea
                        rows="1"
                        class="form-control"
                        [(ngModel)]="item.remarks" name="remarks"
                        placeholder="Describe Overview here..."
                      >
                      </textarea>
                </td>
              </tr>
            </ng-template>
          </p-table>
        </div>
      </div>
    </div>
  </div>
</div>
